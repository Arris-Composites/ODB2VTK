# - Find Abaqus SDK library
# Find the Abaqus SDK includes and library
find_path(AbqSDK_PRIVATE_INCLUDE_DIR
  NAMES
    odb_API.h
  PATHS
    /usr/local/include
    /usr/include
    "C:/SIMULIA/EstProducts/2023/win_b64/code/include"
)

find_path(AbqSDK_PRIVATE_PUBLIC_DIR
  NAMES
    SMAOdb
  PATHS
    /usr/local/include
    /usr/include
    "C:/SIMULIA/EstProducts/2023"
)

find_path(AbqSDK_PRIVATE_LIB 
  NAMES 
    ABQDMP_Core.lib
  PATHS
    "C:/SIMULIA/EstProducts/2023/win_b64/code/lib"
)

mark_as_advanced(AbqSDK_PRIVATE_INCLUDE_DIR)
mark_as_advanced(AbqSDK_PRIVATE_PUBLIC_DIR)
mark_as_advanced(AbqSDK_PRIVATE_LIB)

# find *.lib from Abaqus
set(ABQ_LIB_LIST 
"ABQDMP_Core"                                        
"ABQMPI_api"                                         
"ABQSMAAbuBasicUtils"                                
"ABQSMAAbuGeom"                                      
"ABQSMAAspCommunications"                            
"ABQSMAAspDiagExtractor"                             
"ABQSMAAspExpKernelComm"                             
"ABQSMAAspSupport"                                   
"ABQSMABasAlloc"                                     
"ABQSMABasCoreUtils"                                 
"ABQSMABasGenericsLib"                               
"ABQSMABasPrfTrkLib"                                 
"ABQSMABasRtvUtility"                                
"ABQSMABasShared"                                    
"ABQSMABasXmlDocument"                               
"ABQSMABasXmlParser"                                 
"ABQSMABlaModule"                                    
"ABQSMAElkCore"                                      
"ABQSMAFeoModules"                                   
"ABQSMAFsmShared"                                    
"ABQSMAMsgModules"                                   
"ABQSMAMtxCoreModule"                                
"ABQSMAObjSimObjectsMod"                             
"ABQSMAOdbApi"                                       
"ABQSMAOdbAttrEO"                                    
"ABQSMAOdbAttrEO2"                                   
"ABQSMAOdbCalcK"                                     
"ABQSMAOdbCore"                                      
"ABQSMAOdbCoreGeom"                                  
"ABQSMAOdbDdbOdb"                                    
"ABQSMARfmInterface"                                 
"ABQSMARomDiagEx"                                    
"ABQSMASfsModule"                                    
"ABQSMASglSharedLib"                                 
"ABQSMASglSimXmlFndLib"                              
"ABQSMAShaDbIface-D"                                 
"ABQSMAShaDbIface"                                   
"ABQSMAShaShared-D"                                  
"ABQSMAShaShared"                                    
"ABQSMAShpCore"                                      
"ABQSMASimBCompress"                                 
"ABQSMASimBulkAPI"                                   
"ABQSMASimContainers"                                
"ABQSMASimInterface"                                 
"ABQSMASimManifestSubcomp"                           
"ABQSMASimPoolManager"                               
"ABQSMASimS2fSubcomp"                                
"ABQSMASimSerializerAPI"                             
"ABQSMASrvBasic"                                     
"ABQSMASrvSimXmlConverters"                          
"ABQSMASspUmaCore"                                   
"ABQSMAUsubsLib"                                     
"ABQSMAUzlZlib"                                      
"AfrInterfacesUUID"                                  
"AutomationInterfacesUUID"                           
"CAT3DBehaviorItf"                                   
"CAT3DPhysicalRepItf"                                
"CATAfrComponentsModel"                              
"CATAfrFoundation"                                   
"CATAfrFoundationUUID"                               
"CATAfrGeometryWshop"                                
"CATAfrImmersiveRender"                              
"CATAfrItf"                                          
"CATAfrMePreferenceCtls"                             
"CATAfrPalette"                                      
"CATAfrPreferenceModel"                              
"CATAfrPrferenceOptions"                             
"CATAfrProgressTask"                                 
"CATAfrProperties"                                   
"CATAfrSelection"                                    
"CATAuthoringUIInterfaces"                           
"CATAutoItf"                                         
"CATBBMagic"                                         
"CATClnBase"                                         
"CATComBase"                                         
"CATComDrvBB"                                        
"CATComHTTPEndPoint"                                 
"CATComServices"                                     
"CATComSidl"                                         
"CATComSidlFile"                                     
"CATDbProvider"                                      
"CATDegUUID"                                         
"CATDialogEngine"                                    
"CATDiscover"                                        
"CATDlgA2XWatcher"                                   
"CATDlgAuxStatic"                                    
"CATDlgBitmap"                                       
"CATDlgHtml"                                         
"CATDlgStandard"                                     
"CATDWCInfra"                                        
"CATFmuFileAccessInterfacesUUID"                     
"CATFmuFileAccessItf"                                
"CATGhosting"                                        
"CATGraphicProperties"                               
"CATImmVPMInterfaces"                                
"CATImmVPMInterfacesLFT"                             
"CATImmVPMInterfacesUUID"                            
"CATImmVPMLegacyInterfaces"                          
"CATImmVPMLegacyInterfacesUUID"                      
"CATImmVPMNavInterfaces"                             
"CATImmWtpItfUUID"                                   
"CATInfInterfaces"                                   
"CATInteractiveInterfaces"                           
"CATJNIBridge"                                       
"CATLic"                                             
"CATLMjni"                                           
"CATMagnitude"                                       
"CATMathematics"                                     
"CATMathStream"                                      
"CATMecModLiveUseItf"                                
"CATMecModLiveUseItfUUID"                            
"CATMecModUseItf"                                    
"CATMecModUseItfUUID"                                
"CATMetaModelerProtocol"                             
"CATMetaModelerProtocolUUID"                         
"CATMMediaCore"                                      
"CATMMediaCore2"                                     
"CATMMediaPixelImage"                                
"CATMMediaRasterFormats_SB_File"                     
"CATMMediaRasterProcessor"                           
"CATMMediaXMP"                                       
"CATMMRasterEngineGDIplus"                           
"CATMMRasterEngineIM"                                
"CATMMRasterEngineIM_DBG"                            
"CATMMRasterEngineOpenAPI"                           
"CATObjectModelerBase"                               
"CATObjectModelerContBase"                           
"CATObjectModelerItf"                                
"CATObjectModelerNavigator"                          
"CATOmbLinkNavigationAccess"                         
"CATOme"                                             
"CATOmx"                                             
"CATOmxBase"                                         
"CATOmyLocalStorageCollector"                        
"CATOpDataItf"                                       
"CATP2PBaseUUID"                                     
"CATP2PCore"                                         
"CATPLMClientCoreItf"                                
"CATPLMComponentInterfaces"                          
"CATPLMComponentInterfacesUUID"                      
"CATPLMDictionaryUUID"                               
"CATPLMDispatcherItf"                                
"CATPLMDispatcherSpecificItf"                        
"CATPLMIdentification"                               
"CATPLMIdentificationAccess"                         
"CATPLMIdentificationAccessUUID"                     
"CATPLMImplAdapterBase"                              
"CATPLMIntegrationAccess"                            
"CATPLMIntegrationAccessItf"                         
"CATPLMIntegrationAccessUUID"                        
"CATPLMIntegrationInterfaces"                        
"CATPLMIntegrationInterfacesUUID"                    
"CATPLMIntegrationUse"                               
"CATPLMIntegrationUseUUID"                           
"CATPLMKweDicoServices"                              
"CATPLMModelBuilder"                                 
"CATPLMModelerBaseInterfaces"                        
"CATPLMModelerLanguage"                              
"CATPLMServicesItf"                                  
"CATPLMStreamDescriptor"                             
"CATPrdAccessCAA"                                    
"CATPrdAccessImpl"                                   
"CATProductStructureInterfaces"                      
"CATProductStructureUseItf"                          
"CATProviderItf"                                     
"CATScriptEngine"                                    
"CATScriptReplayInteractions"                        
"CATSGManagerUUID"                                   
"CATSGV6Streaming"                                   
"CATSimpleCommandMessage"                            
"CATStyleProcessor"                                  
"CATSWXVisu"                                         
"CATSysCATIAAI"                                      
"CATSysCATIASF"                                      
"CATSysCommunication"                                
"CATSysDbSettings"                                   
"CATSysExternApp"                                    
"CATSysMotifDrv"                                     
"CATSysMultiThreadingSecured"                        
"CATSysPreview"                                      
"CATSysProxy"                                        
"CATSysRunBrw"                                       
"CATSysTS"                                           
"CATSysTSObjectModeler"                              
"CATUVEncoding"                                      
"CATVBAInfra"                                        
"CATView"                                            
"CATViewSync"                                        
"CATVirtualVaultSystem"                              
"CATVis3DGrid"                                       
"CATVisCIDPanel"                                     
"CATVisColorChooser"                                 
"CATVisCommands"                                     
"CATVisController"                                   
"CATVisControllerUUID"                               
"CATVisDmuStream"                                    
"CATVisFoundation"                                   
"CATVisFoundationUUID"                               
"CATVisHDRILightProcessing"                          
"CATVisHeadlessAPI"                                  
"CATVisHLR"                                          
"CATVisIblPreconvolver"                              
"CATVisImmersivePanel"                               
"CATVisInteropXMLMesh"                               
"CATVisItf"                                          
"CATVisItfUUID"                                      
"CATVisKDop"                                         
"CATVisKDopLOD"                                      
"CATVisLOD"                                          
"CATVisMagnifier"                                    
"CATVisMarshalling"                                  
"CATVisNoGraphicalAPI"                               
"CATVisOctreeTools"                                  
"CATVisPanel"                                        
"CATVisPropertiesUI"                                 
"CATVisTesselation"                                  
"CATVisuPerfoAddin"                                  
"CATVisViewRotation"                                 
"CATVisVoxels"                                       
"CATVizGlider"                                       
"CatXmlCls"                                          
"CatXmlItf"                                          
"CatXmlItfBase"                                      
"CatXmlItfExt"                                       
"CoexUPSJsonMapping"                                 
"CommunicationsUUID"                                 
"DataAdmin"                                          
"DataCommonProtocolUse"                              
"DI0BUILD"                                           
"DI0PANV2"                                           
"DialogDeclarativeEngine"                            
"DSYApplicationMainArch"                             
"DSYSysCnxExit"                                      
"DSYSysDlg"                                          
"DSYSysIRDriver"                                     
"DSYSysIRManagerPlus"                                
"DSYSysIRMSysAdapter"                                
"DSYSysIRSendReport00"                               
"DSYSysIRSendReportCom"                              
"DSYSysIRSendReportItfPlugin"                        
"DSYSysProgressHandler"                              
"DSYSysTrayIcon"                                     
"DSYSysWatchDogHelp"                                 
"DSYSysWatchDogRegisterKeys"                         
"DSYSysWMIDriver"                                    
"DWCLink"                                            
"EKCrypto"                                           
"EKNvidiaGPUMonitoring"                              
"EKPrivateArchive"                                   
"EKSSL"                                              
"ExperienceKernel"                                   
"explicitB-D"                                        
"explicitB"                                          
"explicitU-D"                                        
"explicitU-D_static"                                 
"explicitU"                                          
"explicitU_static"                                   
"GraphicsOptimizer"                                  
"GraphicsOptimizerUUID"                              
"HTTPArch"                                           
"ImageMagick"                                        
"InfModelInterfaces"                                 
"InfOSIDLImpl"                                       
"InfOSIDLItf"                                        
"InstArch"                                           
"InteractiveInterfacesUUID"                          
"IntroInfra"                                         
"IVInterfaces"                                       
"JS0CRYPTEXIT"                                       
"JS0DLK"                                             
"JS0FM"                                              
"JS0GROUP"                                           
"JS0PCC"                                             
"JS0SMT"                                             
"KnowledgeInterfacesUUID"                            
"KnowledgeItf"                                       
"libjpegCode"                                        
"libpngCode"                                         
"libtiffCode"                                        
"LPCommonEditorItf"                                  
"lz4_static"                                         
"MaskedAttributeImpl"                                
"MaskedAttributeItf"                                 
"mkl_core_dll"                                       
"mkl_intel_ilp64_dll"                                
"mkl_intel_lp64_dll"                                 
"mkl_intel_thread_dll"                               
"mkl_rt"                                             
"mkl_sequential_dll"                                 
"MPROCTools"                                         
"msmpi"                                              
"MultimediaItf"                                      
"NewTypingMigrationDBDI"                             
"nvml"                                               
"ObjectModelerNavigatorUUID"                         
"ObjectModelerSystem"                                
"PLMBatchInfraServices"                              
"PLMBLTempoDevFlags"                                 
"PLMBusinessLogicInterfaces"                         
"PLMBusinessLogicInterfacesUUID"                     
"PLMDictionaryInterfaces"                            
"PLMDictionaryNavServices"                           
"PLMExchangeCompletionServices"                      
"PLMExchangeFileServices"                            
"PLMExchangeGlobalServices"                          
"PLMExchangeModel"                                   
"PLMExchangeWebServices"                             
"PLMFLPCommonModeler"                                
"PLMModelerBase"                                     
"PLMModelerBaseInterfacesUUID"                       
"PLMPSISessionInterfaces"                            
"PLMPSIUserExit"                                     
"ProductStructure3DPartItf"                          
"RecordToolsLib"                                     
"RunTimeStackManager"                                
"SceneGraphManager"                                  
"SecurityContext"                                    
"SGInfra"                                            
"SG_UUID"                                            
"SMAAbuCodeGen"                                      
"SMAAspCodeGen"                                      
"SMABasCodeGen"                                      
"SMAFeaBackbone"                                     
"SMAFsmCodeGen"                                      
"SMAShaCodeGen_DP"                                   
"SMAShaCodeGen_SP"                                   
"SMASimCodeGen"                                      
"standardB"                                          
"standardU"                                          
"standardU_static"                                   
"StringUtilities"                                    
"SysSqlite"                                          
"SystemTSUUID"                                       
"SystemUUID"                                         
"UIModelInterfaces"                                  
"UIModelInterfacesUUID"                              
"UIVCoreTools"                                       
"UndoRedoUI"                                         
"VBAIntegration"                                     
"VBAUUID"                                            
"VisCore"                                            
"VisGDIAPIUtility"                                   
"VisGltf"                                            
"VisQualityManagement"                               
"VisRayTracingToggleCommand"                         
"VisREKernel"                                        
"VisREKernelTools"                                   
"VisREMath"                                          
"VisSceneGraph"                                      
"VisTootle"                                          
"VisuDialog"                                         
"VisuDialogEx"                                       
"VisuDialogImpl"                                     
"VisuImmersive3D"                                    
"VisuImmersiveDialogExUUID"                          
"VPMEditorInterfaces"                                
"VPMIDicInterfaces"                                  
"XPDMServices"                                       
"zLibCode" 
)
set(AbqSDK_PRIVATE_INCLUDE_DIRS "${AbqSDK_PRIVATE_INCLUDE_DIR}" "${AbqSDK_PRIVATE_PUBLIC_DIR}")


set(FOUND_ABQ_LIB_FULL_PATH)
set(ABQ_LIB_TARGETS)
foreach(LIB ${ABQ_LIB_LIST})
  set(temp${LIB})
  find_library(temp${LIB}
    NAMES
      "${LIB}.lib"
    PATHS
      ${AbqSDK_PRIVATE_LIB}
  )
  mark_as_advanced(temp${LIB})
  list(APPEND FOUND_ABQ_LIB_FULL_PATH ${temp${LIB}})

  if (NOT TARGET AbqSDK::${LIB})
    add_library(AbqSDK::${LIB} UNKNOWN IMPORTED)
    set_target_properties(AbqSDK::${LIB}
      PROPERTIES
        IMPORTED_LOCATION ${temp${LIB}} 
        INTERFACE_INCLUDE_DIRECTORIES "${AbqSDK_PRIVATE_INCLUDE_DIRS}")
    list(APPEND ABQ_LIB_TARGETS AbqSDK::${LIB})
  endif ()
endforeach()

include(FindPackageHandleStandardArgs)
find_package_handle_standard_args(AbqSDK
  REQUIRED_VARS 
    FOUND_ABQ_LIB_FULL_PATH
    AbqSDK_PRIVATE_INCLUDE_DIR)